import{o as d,c as m,b as e,t as p,j as M,F as g,u as $,r as h,n as N,A as P,_ as U,g as k,k as j,a as S,l as T,w as A,d as b,v as G,m as V,q as H,s as F,S as R,e as X,x as Y,p as J,f as q}from"./index-ac545b60.js";const z={class:"align-middle",scope:"row"},K={class:"align-middle d-none d-sm-table-cell"},Q={class:"align-middle adminResponsive"},W={class:"align-middle adminResponsive d-none d-sm-table-cell"},Z={class:"align-middle d-none d-sm-table-cell"},O={__name:"AdminGameLine",props:["gameData"],setup(u){const n=u,r=n.gameData.plateforms;let i="";try{for(let o=0;o<r.length;o++)i+=r[o].namePlateform,o<r.length-1&&(i+=", ")}catch(o){throw o instanceof TypeError?"Test":o}return(o,y)=>(d(),m(g,null,[e("th",z,p(n.gameData.titleGame),1),e("td",K,p(n.gameData.typeGame),1),e("td",Q,p(n.gameData.publisherGame),1),e("td",W,p(n.gameData.yearGame),1),e("td",Z,p(M(i)),1)],64))}},ee=["id"],te={class:"align-middle",scope:"row"},se={class:"align-middle"},ae={class:"align-middle"},oe={__name:"AdminUserLine",props:["userData"],setup(u){const n=u,r=$(),i=n.userData.idUser,o=h("btn btn-danger");n.userData.isAdmin==1&&(o.value=o.value+" disabled");function y(){const _=document.getElementById("user-"+i);fetch("/api/users",{method:"DELETE",headers:Object.assign({"Content-Type":"application/json"},P.authHeader()),body:JSON.stringify({idUser:i})}).then(c=>c.json()).then(c=>{c.message.includes("User deleted")&&(_.remove(),r.error("User deleted",{position:"bottom-right",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:!1,icon:!0,rtl:!1}))})}return(_,c)=>(d(),m("tr",{id:"user-"+M(i)},[e("th",te,p(n.userData.username),1),e("td",se,p(n.userData.emailUser),1),e("td",ae,[e("button",{type:"button",class:N(o.value),onClick:c[0]||(c[0]=w=>y())},"Delete",2)])],8,ee))}},le={class:"card"},ne={class:"card-body"},de={class:"card-title text-center m-0"},re={__name:"AdminPlateformLine",props:["plateformData"],setup(u){return(n,r)=>(d(),m("div",le,[e("div",ne,[e("h5",de,p(u.plateformData.namePlateform),1)])]))}};const l=u=>(J("data-v-dad594c5"),u=u(),q(),u),ie={class:"container-fluid"},ce={class:"row my-3"},me=H('<div class="col-2 d-none d-sm-block" data-v-dad594c5><nav id="navbar-example3" class="h-100 flex-column align-items-stretch pe-4 border-end" data-v-dad594c5><nav class="nav nav-pills flex-column" data-v-dad594c5><a class="nav-link" href="#games" data-v-dad594c5>Games</a><a class="nav-link" href="#users" data-v-dad594c5>Users</a><a class="nav-link" href="#plateforms" data-v-dad594c5>Plateforms</a></nav></nav></div>',1),ue={class:"col-sm-10"},he={"data-bs-spy":"scroll","data-bs-target":"#navbar-example3","data-bs-smooth-scroll":"true",class:"scrollspy-example-2",tabindex:"0"},pe={id:"games"},_e=l(()=>e("h4",null,"Games",-1)),ve={class:"table table-hover"},be=l(()=>e("thead",null,[e("tr",null,[e("th",{class:"col-6 col-sm-4",scope:"col"},"Title"),e("th",{class:"col-sm-2 d-none d-sm-table-cell",scope:"col"},"Type"),e("th",{class:"col-6 col-sm-2",scope:"col"},"Publisher"),e("th",{class:"col-sm-1 d-none d-sm-table-cell",scope:"col"},"Year"),e("th",{class:"col-sm-3 d-none d-sm-table-cell",scope:"col"},"Platform")])],-1)),fe={id:"gameTable"},ge=["id"],ye={class:"text-center"},we=l(()=>e("button",{type:"button",class:"btn btn-success ms-5","data-bs-toggle":"modal","data-bs-target":"#newGameModal"},"Add new game",-1)),Ge={id:"users"},Pe=l(()=>e("h4",{class:"titleAdminPart"},"Users",-1)),xe={class:"table table-hover"},De=l(()=>e("thead",null,[e("tr",null,[e("th",{class:"col-5",scope:"col"},"Username"),e("th",{class:"col-6",scope:"col"},"Email"),e("th",{class:"col-1",scope:"col"})])],-1)),Se={id:"usersTable"},Te={id:"plateforms"},Ae=l(()=>e("h4",{class:"titleAdminPart"},"Plateform",-1)),Oe={id:"plateformTable",class:"row row-cols-auto",style:{"margin-right":"0%"}},Ie=["id"],Me=l(()=>e("div",{class:"text-center"},[e("button",{type:"button",class:"btn btn-success ms-5","data-bs-toggle":"modal","data-bs-target":"#newPlateformModal"},"Add new plateform")],-1)),$e={class:"modal fade",id:"newGameModal",tabindex:"-1","aria-labelledby":"newGameModalLabel","aria-hidden":"true"},Ce={class:"modal-dialog"},Be={class:"modal-content"},Ee=l(()=>e("div",{class:"modal-header"},[e("h1",{class:"modal-title fs-5",id:"newGameModalLabel"},"Add new game"),e("button",{id:"closeNewGameModal",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),Le={class:"modal-body"},Ne={class:"form-floating mb-3"},Ue=l(()=>e("label",{for:"titleGameInput"},"Title Game",-1)),ke={class:"row"},je={class:"col"},Ve={class:"form-floating mb-3"},He=l(()=>e("label",{for:"typeGameInput"},"Type",-1)),Fe={class:"col"},Re={class:"form-floating mb-3"},Xe=l(()=>e("label",{for:"publisherGameInput"},"Publisher",-1)),Ye={class:"col"},Je={class:"form-floating mb-3"},qe=l(()=>e("label",{for:"yearGameInput"},"Year",-1)),ze=l(()=>e("div",{class:"modal-footer"},[e("button",{type:"submit",class:"btn btn-success"},"Submit")],-1)),Ke={class:"modal fade",id:"newPlateformModal",tabindex:"-1","aria-labelledby":"newPlateformModal","aria-hidden":"true"},Qe={class:"modal-dialog"},We={class:"modal-content"},Ze=l(()=>e("div",{class:"modal-header"},[e("h1",{class:"modal-title fs-5",id:"newPlateformModalLabel"},"Add new plateform"),e("button",{id:"closeNewPlateformModal",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),et={class:"modal-body"},tt={class:"form-floating mb-3"},st=l(()=>e("label",{for:"namePlateformInput"},"Name Plateform",-1)),at=l(()=>e("div",{class:"modal-footer"},[e("button",{type:"submit",class:"btn btn-success"},"Submit")],-1)),f="/api/",I=5,ot={__name:"AdminView",setup(u){const n=$();var r=0;const i=h([]),o=h([]),y=h([]),_=h(""),c=h(""),w=h(""),x=h(2023),D=h([]),v=h("");k(async()=>{(await P.isAdmin()).isAdmin==0?j.push({name:"home"}):(fetch(f+"games",{headers:{limit:I.toString(),last_game_retrived:r.toString()}}).then(t=>t.json()).then(t=>{i.value=t,r=t[t.length-1].idGame}).catch(t=>console.log("Error")),fetch(f+"plateforms").then(t=>t.json()).then(t=>o.value=t).catch(t=>console.log("Error")),fetch(f+"users",{headers:P.authHeader()}).then(t=>t.json()).then(t=>y.value=t).catch(t=>console.log("Error")))});function C(){fetch(f+"games",{headers:{limit:I.toString(),last_game_retrived:r.toString()}}).then(t=>t.json()).then(t=>{i.value.push(t),t.forEach(a=>B(a)),r=t[t.length-1].idGame}).catch(t=>console.log("Error"))}function B(t){const a=document.getElementById("gameTable"),s=document.createElement("tr");s.id="game-"+t.idGame,a.appendChild(s),F(O,{gameData:t}).mount("#game-"+t.idGame)}function E(){fetch(f+"games",{method:"POST",headers:Object.assign({"Content-Type":"application/json"},P.authHeader()),body:JSON.stringify({titleGame:_.value,typeGame:c.value,publisherGame:w.value,yearGame:x.value,plateforms:D.value})}).then(t=>t.json()).then(t=>{console.log(t.message),n.success("New game created !",{position:"bottom-right",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:!1,icon:!0,rtl:!1}),document.getElementById("closeNewGameModal").click(),_.value="",c.value="",w.value="",x.value=2023,D.value=[]}).catch(t=>console.log(t))}function L(){console.log(v.value),fetch(f+"plateforms",{method:"POST",headers:Object.assign({"Content-Type":"application/json"},P.authHeader()),body:JSON.stringify({namePlateform:v.value})}).then(t=>t.json()).then(t=>{console.log(t.message),n.success("New plateform created !",{position:"bottom-right",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:!1,icon:!0,rtl:!1}),document.getElementById("closeNewPlateformModal").click(),o.value.push({namePlateform:v.value}),v.value=""}).catch(t=>console.log(t))}return(t,a)=>(d(),m(g,null,[S(R),S(X,{title:"YouGame - Admin"}),e("div",ie,[e("div",ce,[me,e("div",ue,[e("div",he,[e("div",pe,[_e,e("table",ve,[be,e("tbody",fe,[(d(!0),m(g,null,T(i.value,s=>(d(),m("tr",{id:"game-"+s.idGame},[S(O,{gameData:s},null,8,["gameData"])],8,ge))),256))])]),e("div",ye,[e("button",{type:"button",class:"btn btn-secondary",onClick:a[0]||(a[0]=s=>C())},"Load More"),we])]),e("div",Ge,[Pe,e("table",xe,[De,e("tbody",Se,[(d(!0),m(g,null,T(y.value,s=>(d(),Y(oe,{userData:s},null,8,["userData"]))),256))])])]),e("div",Te,[Ae,e("div",Oe,[(d(!0),m(g,null,T(o.value,s=>(d(),m("div",{id:"plateform-"+s.namePlateform,class:"col plateformCards"},[S(re,{plateformData:s},null,8,["plateformData"])],8,Ie))),256))]),Me])])])]),e("div",$e,[e("div",Ce,[e("div",Be,[Ee,e("form",{onSubmit:a[6]||(a[6]=A(s=>E(),["prevent"]))},[e("div",Le,[e("div",Ne,[b(e("input",{type:"text",class:"form-control",id:"titleGameInput",placeholder:"Title",maxlength:"200","onUpdate:modelValue":a[1]||(a[1]=s=>_.value=s)},null,512),[[G,_.value]]),Ue]),e("div",ke,[e("div",je,[e("div",Ve,[b(e("input",{type:"text",class:"form-control",id:"typeGameInput",placeholder:"Type",maxlength:"100","onUpdate:modelValue":a[2]||(a[2]=s=>c.value=s)},null,512),[[G,c.value]]),He])]),e("div",Fe,[e("div",Re,[b(e("input",{type:"text",class:"form-control",id:"publisherGameInput",placeholder:"Publisher",maxlength:"100","onUpdate:modelValue":a[3]||(a[3]=s=>w.value=s)},null,512),[[G,w.value]]),Xe])]),e("div",Ye,[e("div",Je,[b(e("input",{type:"number",pattern:"\\d{4}",min:"1900",max:"2099",class:"form-control",id:"yearGameInput",placeholder:"XXXX",maxlength:"100","onUpdate:modelValue":a[4]||(a[4]=s=>x.value=s)},null,512),[[G,x.value]]),qe])])]),b(e("select",{class:"form-select",multiple:"","aria-label":"Multiple select example","onUpdate:modelValue":a[5]||(a[5]=s=>D.value=s)},[(d(!0),m(g,null,T(o.value,s=>(d(),m("option",null,p(s.namePlateform),1))),256))],512),[[V,D.value]])]),ze],32)])])]),e("div",Ke,[e("div",Qe,[e("div",We,[Ze,e("form",{onSubmit:a[8]||(a[8]=A(s=>L(),["prevent"]))},[e("div",et,[e("div",tt,[b(e("input",{type:"text",class:"form-control",id:"namePlateformInput",placeholder:"Plateform",maxlength:"200","onUpdate:modelValue":a[7]||(a[7]=s=>v.value=s)},null,512),[[G,v.value]]),st])]),at],32)])])])])],64))}},nt=U(ot,[["__scopeId","data-v-dad594c5"]]);export{nt as default};
